<div class="row">
    <div class="col-12">
        <br>
        <div class="center-align custom-container">
            <div class="d-flex align-items-center justify-content-center userName">
                <h3 class="text-center me-2 m-0">Hoş geldiniz </h3>
                <div class="label_part">
                    <label>
                        {{ tokenService.tokenFullName() }}
                    </label>
                </div>

                <img src="../../assets/hosgeldiniz.png" alt="" style="width: 40px;height: 40px;">
            </div>
        </div>
        <div class="center-align custom-container" *ngIf="tasks.length == 0"> <!-- TUANAAAAAAAAAAAAAA-->
            <p>{{'emptyMessage' | transloco}}</p>
        </div>

        <div class="center-align custom-container" *ngIf="tasks.length != 0">
            <div class="d-flex align-items-center justify-content-center projectName">
                Burada
                <label>{{ projectService.getProjectLocal()?.name }}</label> adlı projenin durumunun, önceliklerinin, iş
                yükünün
                ve daha fazlasının bir özetini görebilirsiniz.
            </div>
        </div>

        <div class="container overflow-hidden text-center">
            <div class="row gx-6">
                <div class="col">
                    <div class="button-container">
                        <button type="button" class="btn btn-primary"
                            (click)="summaryFilter('LastSevendDaysCompletedTasks')">
                            <div class="p-4 d-flex align-items-center">
                                <img src="../../assets/takvim.png" alt="" class="me-2">
                                <div>
                                    <h4>Son 7 günde</h4>
                                    <h5>{{ completedSevenDay }} task tamamlandı.</h5>
                                </div>
                            </div>
                        </button>
                    </div>
                </div>
                <div class="col">
                    <div class="button-container">
                        <button type="button" class="btn btn-primary" (click)="summaryFilter('CreatedDate')">
                            <div class="p-4 d-flex align-items-center">
                                <img src="../../assets/olustur.png" alt="" class="me-2">
                                <div>
                                    <h4>Son 7 günde</h4>
                                    <h5>{{ createdTaskLength }} task oluşturuldu.</h5>
                                </div>
                            </div>
                        </button>
                    </div>
                </div>

                <div class="col">
                    <div class="button-container">
                        <button type="button" class="btn btn-primary" (click)="summaryFilter('UpdatedDate')">
                            <div class="p-4 d-flex align-items-center">
                                <img src="../../assets/güncellenme.png" alt="" class="me-2">
                                <div>
                                    <h4>Son 7 günde</h4>
                                    <h5>{{ updatedTaskLength }} task güncellendi.</h5>
                                </div>
                            </div>
                        </button>
                    </div>
                </div>
                <div class="col">
                    <div class="button-container">
                        <button type="button" class="btn btn-primary" (click)="summaryFilter('CompletedTasks')">
                            <div class="p-4 d-flex align-items-center">
                                <img src="../../assets/okey.png" alt="" class="me-2">
                                <div>
                                    <h4>Toplam &nbsp;</h4>
                                    <h5>{{ completedAllLength }} task tamamlandı.</h5>
                                </div>
                            </div>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <br>
        <br>

        <div class="container overflow-hidden text-center">
            <div class="row">
                <div class="col-6">
                    <div class="p-4 rounded"
                        style="display: block; height: 400px; max-width: 650px; border: 1px solid black; background-color: rgb(255, 255, 255);">
                        <h5 style="text-align: left; margin-bottom: 0; font-weight: bold; font-size: 1.2em;">Durum Genel
                            Bakışı</h5>
                        <br>
                        <h6 style="text-align: left; margin-top: 0;">
                            Takımınızın ilerleme durumunun özetini görmek için takımınızda birkaç öğe oluşturmalısınız.
                            <button
                                style="border: none; background: none; color: blue; text-decoration: underline; cursor: pointer;">Bir
                                öğe oluşturun</button>

                        </h6>

                        <app-chart></app-chart>

                    </div>
                </div>

                <div class="col-6">
                    <div class="p-4 rounded" style="max-height: 400px;max-width: 650px; border: 1px solid black;background-color: rgb(255, 255, 255);">
                        <h5 style="text-align: left; margin-bottom: 0; font-weight: bold; font-size: 1.2em;">Öncelik
                            Dökümü</h5>
                        <br>
                        <h6 style="text-align: left; margin-top: 0;">
                            İşleri önceliklendirebilmek için birkaç öğe oluşturmalısınız.
                            <button
                                style="border: none; background: none; color: blue; text-decoration: underline; cursor: pointer;">Bir
                                öğe oluşturun</button>
                        </h6>
                        <svg id="priority-chart"></svg>
                        <div class="icon-container-wrapper">
                            <div class="icon-container">
                                <img src="../../assets/lowest.png" alt="Priority Icon" class="priority-icon" />
                                <img src="../../assets/low.png" alt="Priority Icon" class="priority-icon" />
                                <img src="../../assets/medium.png" alt="Priority Icon" class="priority-icon" />
                                <img src="../../assets/high.png" alt="Priority Icon" class="priority-icon" />
                                <img src="../../assets/highest.png" alt="Priority Icon" class="priority-icon" />
                            </div>
                        </div>
                    </div>
                    <br><br>
                </div>
            </div>
        </div>

        

        <div class="container overflow-hidden text-center">
            <div class="row">
                <div class="col-6">
                    <div class="p-4 rounded"
                        style="display: block; height: 400px; max-width: 650px; border: 1px solid black;background-color: rgb(255, 255, 255);">
                        <h5 style="text-align: left; margin-bottom: 0; font-weight: bold; font-size: 1.2em;">
                            {{ tokenService.tokenFullName() }} kullanıcısı olarak En Son
                            Etkinlikleriniz</h5>
                        <br>

                        <div class="scroll">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Type</th>
                                        <th>Field</th>
                                        <th>OldValue</th>
                                        <th>NewValue</th>
                                        <th>UpdatedDate</th>
                                    </tr>
                                </thead>
                                <tbody class="click-user">
                                    <tr *ngFor="let log of userLogs">
                                        <td><a>{{ log.tableName}}</a></td>
                                        <td>{{ log.fieldName }}</td>
                                        <td>{{ log.oldValue | dynamicTransform: log.fieldName: userList}}</td>
                                        <td>{{ log.newValue | dynamicTransform: log.fieldName: userList}}</td>
                                        <td>{{ log.actionDate | date:'MMM d, y, h:mm a'}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <br><br>
                        <div class="pagination-controls">
                            <button (click)="previousPage()" [disabled]="pageNumber === 1">Previous</button>
                            &nbsp; &nbsp;
                            <button (click)="nextPage()" [disabled]="pageNumber * pageSize >= totalCount">Next</button>

                          </div>
                    </div>
                </div>

                <div class="col-6">
                    <div class="p-4 rounded"
                        style="display: block; height: 400px; max-width: 650px; border: 1px solid black;background-color: rgb(255, 255, 255);">
                        <h5 style="text-align: left; margin-bottom: 0; font-weight: bold; font-size: 1.2em;">Takım
                            İş Yükü</h5>
                        <br>
                        <div class="scroll">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th scope="col">Atanan Kişi</th>
                                        <th scope="col">İş Dağılımı</th>
                                        <th scope="col">Task Sayısı</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr (click)="summaryFilter('selectAssignee','unassigned')" class="click-user">
                                        <td>Atanmamış</td>
                                        <!-- <th scope="row" style="text-align: left;">Atanmamış</th> -->
                                        <td>
                                            <div class="progress">
                                                <div class="progress-bar"
                                                    [style.width.%]="(userTasks['unassigned'] / totalTasks) * 100">
                                                    {{ ((userTasks['unassigned'] || 0) / totalTasks) * 100 | number:
                                                    '1.0-0' }}%
                                                </div>
                                            </div>
                                        </td>
                                        <td>{{ userTasks['unassigned'] || 0 }}</td>
                                    </tr>
                                    <tr *ngFor="let user of users" (click)="summaryFilter('selectAssignee', user.id)"
                                        class="click-user">
                                        <td>{{ user.id | user:userList}}</td>
                                        <td>
                                            <div class="progress">
                                                <div class="progress-bar"
                                                    [style.width.%]="(userTasks[user.id] / totalTasks) * 100">
                                                    {{ ((userTasks[user.id] || 0) / totalTasks) * 100 | number:
                                                    '1.0-0' }}%
                                                </div>
                                            </div>
                                        </td>
                                        <td>{{ userTasks[user.id] || 0 }}</td>
                                    </tr>
                                </tbody>
                            </table>
                            <button (click)="addUserDialog()" [disabled]="tokenService.hasRole('User')"
                                class="add-person">
                                <img src="../../assets/takım.ekle.png" alt="" style="width: 25px;">Takımınıza yeni
                                birini ekleyin.
                            </button>
                        </div>
                    </div>
                </div>

            </div>
            <br>
            <br>
            <br>
        </div>
    </div>
</div>